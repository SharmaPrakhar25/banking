var WF={};$("html").removeClass("no-js");if($("html").attr("class")==""){$("html").removeAttr("class");}WF.Browser={};WF.Component={};WF.Strings={"Components":{"BalloonHelp":{"beginningOfPopup":{"en":"Beginning of popup","es":"Comienzo de ventana emergente"},"endOfPopup":{"en":"End of popup","es":"Fin de ventana emergente"}},},"Shared":{"beginItemNo":{"en":"Begin item ","es":"Comienzo del &iacute;tem "},"endItemNo":{"en":"End item ","es":"Fin del &iacute;tem "},"item":{"en":"item","es":"Promoci&oacute;n"},"next":{"en":"Next Slide","es":"Siguiente"},"prev":{"en":"Previous Slide","es":"Anterior"},"close":{"en":"Close","es":"Cierre"},"activeDefaultText":{"en":" - you are here","es":" - Usted est&aacute; aqu&iacute;"},"of":{"en":" of ","es":" de "},"searchSuggest":{"en":"Xn result(s) are displayed","es":"Se muestra(n) Xn resultado(s)"}}};(function($){$.fn.touchwipe=function(settings){var config={min_move_x:20,min_move_y:20,wipeLeft:function(e){},wipeRight:function(e){},wipeUp:function(e){},wipeDown:function(e){},preventDefaultEvents:false};if(settings){$.extend(config,settings);}this.each(function(){var startX;var startY;var isMoving=false;function cancelTouch(){this.removeEventListener("touchmove",onTouchMove);startX=null;isMoving=false;}function onTouchMove(e){if(config.preventDefaultEvents){e.preventDefault();}if(isMoving){var x=e.touches[0].pageX;var y=e.touches[0].pageY;var dx=startX-x;var dy=startY-y;if(Math.abs(dx)>=config.min_move_x){cancelTouch();if(dx>0){config.wipeLeft(e);}else{config.wipeRight(e);}}else{if(Math.abs(dy)>=config.min_move_y){cancelTouch();if(dy>0){config.wipeUp(e);}else{config.wipeDown(e);}}}}}function onTouchStart(e){if(e.touches.length==1){startX=e.touches[0].pageX;startY=e.touches[0].pageY;isMoving=true;this.addEventListener("touchmove",onTouchMove,false);}}if("ontouchstart" in document.documentElement){this.addEventListener("touchstart",onTouchStart,false);}});return this;};})(jQuery);WF.Utils={ajaxLog:function(err){var url="/as/common/jslog";if(location.href.search("isg-neo")!=-1){url="jslog.php";}var query={"errorString":err.message,"pageUrl":window.location.href};if(err.fileName){query.jsFileUrl=err.fileName;}else{if(err.sourceURL){query.jsFileUrl=err.sourceURL;}}if(err.stack){var stack=WF.Utils.parseErrorStack(err.stack);if(stack[0]){if(stack[0].name){query.errorFunctionName=stack[0].name;}if(stack[0].line){query.errorLineNumber=stack[0].line;}if(!query.jsFileUrl){query.jsFileUrl=stack[0].url;}if(stack[0].args){query.additionalInfo="arguments: "+stack[0].args;}}if(stack[1]&&stack[1].name){query.callingFunctionName=stack[1].name;}}else{query.errorFunctionName=WF.Utils.getNameFromCallee(arguments.callee.caller);query.callingFunctionName=WF.Utils.getNameFromCallee(arguments.callee.caller.caller);}if(err.line){query.errorLineNumber=err.line;}$.get(url,query);},getBrowserSupport:function(){var ret={};ret.tel=false;var userAgent=navigator.userAgent;var mobileStrings=["iPhone","Android","BlackBerry","Mobile"];$.each(mobileStrings,function(idx,val){if(new RegExp(val,"i").test(userAgent)){ret.tel=true;return true;}});ret.touch=!!("ontouchstart" in window);return ret;},getDimensions:function(elem){return{"width":$(elem).width(),"height":$(elem).height()};},getClist:function(elem){if(elem==null){return"";}if(elem.tagName=="BODY"){return"";}var clist=$(elem).data("cid")+"~"+$(elem).data("ctid");if(clist.search("undef")!=-1){return WF.Utils.getClist(elem.parentNode);}return clist;},getLang:function(elem){if(elem.tagName=="BODY"){return"";}var langVal=$(elem).attr("lang");if((langVal==null)){return WF.Utils.getLang(elem.parentNode);}return langVal;},getNameFromCallee:function(callee){var hope=callee.toString().match(/^function (\w*)\(/);if(hope&&hope[1]){return hope[1];}if(callee.toString().search(/^function ?\(/)!=-1){return"[anonymous function]";}return false;},getViewportSize:function(){return{"width":$(window).width(),"height":$(window).height()};},getTasCallData:function(elem,useDisplayed){elem=$(elem).get(0);var $elem=$(elem),ret={},slotId,langVal,COID;if($elem.prop("tagName").toLowerCase()!="a"){if($(elem).find(".iaRendered").length){elem=$(elem).find(".iaRendered").get(0);}else{return false;}$elem=$(elem);}else{if(!$elem.data("offerId")&&$elem.parents(".iaRendered").length){elem=$elem.parents(".iaRendered").get(0);$elem=$(elem);}}if($elem.data("offerId")){COID=$elem.data("offerId");slotId=$elem.data("slotId");langVal=$elem.attr("lang");}else{if(useDisplayed){return{"displayed":null};}return null;}if(useDisplayed){ret.displayed=slotId+":"+COID+":"+langVal;}else{ret.COID=COID;ret.slotId=slotId;ret.lang=langVal;}return ret;},parseErrorStack:function(stack,errName){var isChrome=(stack.search(/\n +at/)!=-1);stack=stack.replace(/(\d+):\d+\)\n/g,"$1\n");var lines=stack.split(/\n(?: +at )?/);if(isChrome){lines.shift();}var ret=[],funcname;for(var i=0,j=lines.length;i<j;i++){var item={};if(isChrome){funcname=lines[i].split(/ /).shift();}else{funcname=lines[i].split(/\@/).shift();}var match=funcname.match(/\((.*)\)$/);if(match){item.args=match[1];funcname=funcname.substr(0,funcname.indexOf("("));}item.name=funcname;item.line=lines[i].split(/:/).pop();lines[i]=lines[i].replace(/:\d+$/,"");item.url=lines[i].split(/[\(@]/).pop();ret.push(item);}return ret;},setImageSrcFromBackground:function(img,code){try{var $img=$(img),bgImgPath=$img.css("background-image"),msg="WF.Utils.setImageSrcFromBackground() couldn't get background-image",imgDesc,parents;if($img.get(0).tagName.toLowerCase()!="img"){return false;}imgDesc="IMG";if($img.attr("class")){imgDesc+="."+$img.attr("class");}if(bgImgPath=="none"||!bgImgPath){if(code){msg+=';\ncalled from codepoint "'+code+'"';}parents=$.map($img.parents(),function(elem){elem=$(elem).get(0);if(elem.tagName=="INPUT"){return elem.tagName+"["+elem.type+"]."+elem.className;}ret=elem.tagName;if(elem.id!=""){ret+="#"+elem.id;}if(elem.className!=""){ret+="."+elem.className;}return ret;}).reverse().join(" > ");parents+=" > "+imgDesc;msg+=";\nDOM chain: "+parents;WF.Utils.ajaxLog({"message":msg});return false;}bgImgPath=bgImgPath.replace(/['"]?\)$/,"");bgImgPath=bgImgPath.replace(/^url\(['"']?/,"");$img.attr("src",bgImgPath);return true;}catch(e){WF.Utils.ajaxLog(e);return false;}},stripTcm:function(str){return str.replace(/(^|\~)tcm:/g,"$1");},trackTas:function(tasData,callback){if(!tasInfo){return false;}if(tasData.displayed===null||tasData.displayed==="null"){return false;}var stdOptions={"App_ID":tasInfo.App_ID,"pageID":tasInfo.pageID,"RequestType":"Click"};var asyncMode=true,destinationUrl=tasInfo.Url,trackInfo=stdOptions;$.extend(trackInfo,tasData);if(trackInfo.suppressAsync){asyncMode=false;}if(trackInfo.destinationUrl){destinationUrl=trackInfo.destinationUrl;}delete trackInfo.suppressAsync;if(trackInfo.RequestType=="Click"&&tasInfo.deviceType){trackInfo.deviceType=tasInfo.deviceType;}delete trackInfo.destinationUrl;tasData.App_ID=tasInfo.App_ID;tasData.pageID=tasInfo.pageID;$.ajax({url:destinationUrl,type:"POST",async:asyncMode,data:trackInfo,success:function(){if(callback!=null){callback();}}});},trackVS:function(options,callback){var stdOptions={"log":1,"pid":$("#shell").data("pid"),"pageUrl":window.location.href,"cb":new Date().valueOf()};var asyncMode=true;var trackInfo=stdOptions;$.extend(trackInfo,options);$.each(trackInfo,function(idx,val){if(typeof val=="string"){trackInfo[idx]=WF.Utils.stripTcm(val);}});if(trackInfo.suppressAsync){asyncMode=false;}delete trackInfo.suppressAsync;$.ajax({url:"/assets/images/global/s.gif",type:"GET",async:asyncMode,data:trackInfo,success:function(){if(callback!=null){callback();}}});},deferredImages:function(ms){var deferTime=ms||0;setTimeout(function(){var $deferredImg=$("img.deferred");for(var i=0;i<$deferredImg.length;i++){var oSrc=$deferredImg.eq(i).data("deferred-src");if(oSrc){$deferredImg.eq(i).attr("src",oSrc);}}},deferTime);},doDeferred:function(ms){WF.Utils.deferredImages(ms);$(window).off("scroll.custom");$(document).off("click.marquee");},deferredLoadingActionsOnReady:function(){$(window).on("scroll.custom",function(){WF.Page.deferredTriggered=true;
WF.Utils.doDeferred(0);});$(document).on("click.marquee",".c3wrapper .paddles, .c3wrapper .controls a",function(){WF.Page.deferredTriggered=true;WF.Utils.doDeferred(0);});},deferredLoadingActionsOnLoad:function(ms){setTimeout(function(){if(!WF.Page.deferredTriggered){WF.Utils.doDeferred(0);}},ms);}};WF.OnLoads={doAll:function(root){if(typeof root=="undefined"){root=$("body");}$.each(WF.OnLoads,function(name){if(name!="doAll"&&typeof WF.OnLoads[name]=="function"){try{WF.OnLoads[name](root);}catch(e){WF.Utils.ajaxLog(e);}}});},apply3rdPartyLinkTracking:function(root){if(typeof root=="undefined"){root=$("body");}$(root).find("a[href^='http']").each(function(){if((this.href.search(/^https?:\/\/(www\.)?wellsfargo\.com\//)==-1)&&(!$(this).is(".task a"))){var clist=WF.Utils.getClist(this);$(this).bind("click keypress",function(evt){if(evt.type=="keypress"&&evt.keyCode!=13){return;}WF.Utils.trackVS({"suppressAsync":true,"event":"LinkActivated","eventType":evt.type,"eventDescription":"outsideDomain","destinationUrl":this.href,"linkText":$(this).text(),"clist":clist});if(evt.type=="keypress"){window.location.href=this.href;evt.preventDefault();}});}});},applyTasV2Tracking:function(root){if(typeof root=="undefined"){root=$("body");}$(root).find(".iaRendered").each(function(){this.elem=this;var $el=$(this);var offerId=$el.data("offerId"),slotId=$el.data("slotId"),$cta=$el.find(".c7, .i7 ");if($cta.length==0){return true;}var lang=WF.Utils.getLang(this);var postData={"pageURL":"https://www.wellsfargo.com/Clickthrough","RequestType":"Click","language":lang,"COID":offerId,"App_ID":tasInfo.App_ID,"slotId":slotId,"pageID":tasInfo.pageID,"deviceType":"desktop"};if(tasInfo.deviceType){postData.deviceType=tasInfo.deviceType;}var $ctaElement;for(var i=0;i<$cta.length;i++){$ctaElement=$cta[i];$($ctaElement).bind("click",function(evt){$.ajax({url:tasInfo.Url,type:"POST",async:true,data:postData});});}});if($(root).find(".iaRendered").length==$(root).find(".iaRendered.cmsDefault").length&&$(root).find(".iaRendered").length>0){$.ajax({url:"/assets/images/global/s.gif",type:"GET",data:{"Log":1,"Program":"EventReporting","Event":"IADefaultOffer","Page":window.location.pathname+window.location.search,"cb":new Date().valueOf()}});}},deferredLoadingNba:function(){var dataOrder,dataImgDef,dataImgDefSrc,dateOr;dataOrder=$(".carouselFrameWrapper").find('.carouselFrame[data-order="1"]');dateOr=dataOrder.data("order");if($.isNumeric(dateOr)){dataImgDef=$(dataOrder).find('img[class*="deferred"]');dataImgDefSrc=$(dataOrder).find("img").data("deferred-src");if(dataImgDefSrc){dataImgDef.attr("src",dataImgDefSrc);dataImgDef.removeClass("deferred");}}var dataOrderVal,dataVal,dataImgDef2,dataImgDefSrc2,arrayLength;dataOrderVal=$("ul.c63controls").find("li[data-order]");arrayLength=dataOrderVal.length;for(var i=0;i<arrayLength;i++){dataVal=dataOrderVal.eq(i).data("order");if($.isNumeric(dataVal)){if((dataVal>=1)&&(dataVal<=3)){dataImgDef2=dataOrderVal.eq(i).find('img[class*="deferred"]');dataImgDefSrc2=dataOrderVal.eq(i).find("img").data("deferred-src");if(dataImgDefSrc2){dataImgDef2.attr("src",dataImgDefSrc2);dataImgDef2.removeClass("deferred");}}}}},webLogs:function(root){if(typeof root=="undefined"){root=$("body");}$(document).on("click keypress",".task a, .task input.c7, .hpAdditional a, div.formSubmit input.c7 , .task div.taskSecondstate, .largePromo div.col2 a, .largePromo .col1 a img, .marqueeContent a.c7 , .c63contentMain a.c7 ",function(e){var clist,frameNBA,frameMarqueeCta,c3Imgval,value,numTask45;var destination,destinationGoButton,text,textSugForYou,textSignOn;if($(this).parents().hasClass("c63contentMain")){frameNBA=$(this).closest(".carouselFrame");clist=WF.Utils.getClist(frameNBA);}else{if($(this).parents().hasClass("marqueeContent")){frameMarqueeCta=$(this).closest(".carouselFrame");c3Imgval=$(frameMarqueeCta).find(".c3Img");clist=WF.Utils.getClist(c3Imgval);}else{clist=WF.Utils.getClist(this);}}if(($(this).parents().hasClass("cmsDefault"))||($(this).parents().hasClass("iaRendered"))){value=$(this).parents(".cmsDefault , .iaRendered").data("slot-id");}var num="";if(value){num=value[value.length-1];}if(($(this).is(".taskSecondstate"))||($(this).is(".task input.c7"))){if(($(this).parents("div").attr("id")=="makeAnAppointment")||($(this).is("[aria-controls = 'makeAnAppointment']"))){numTask45=4;}else{if(($(this).parents("div").attr("id")=="checkTodaysRates")||($(this).is("[aria-controls = 'checkTodaysRates']"))){numTask45=5;}}}destination=$(this).attr("href");destinationGoButton=$(this).closest("form").attr("action");text=$(this).text();textSugForYou=$(this).find("span.c5headline").text();textSignOn=$("div.formSubmit input.c7").attr("value");if(($(this).parents().hasClass("cmsDefault"))||($(this).parents().hasClass("iaRendered"))){if($(this).is(".task a")){WF.Utils.trackVS({"event":"LinkActivated","eventType":e.type,"eventDescription":"CTAText","destinationUrl":destination,"clist":clist,"taskSlot":num,"defaultOffer":"true"});}if($(this).parents().hasClass("marqueeContent")){WF.Utils.trackVS({"event":"LinkActivated","eventType":e.type,"eventDescription":"CTAText","destinationUrl":destination,"clist":clist,"linkText":text});}}if($(this).parents().hasClass("cmsDefault")){if($(this).parents().hasClass("largePromo")){WF.Utils.trackVS({"event":"LinkActivated","eventType":e.type,"eventDescription":"CTAtext","destinationUrl":destination,"clist":clist,"linkText":text,"defaultOffer":"true"});}if($(this).parents().hasClass("hpAdditional")){WF.Utils.trackVS({"event":"LinkActivated","eventType":e.type,"eventDescription":"CTAText","destinationUrl":destination,"clist":clist,"linkText":textSugForYou,"taskSlot":num,"defaultOffer":"true"});}}if($(this).parents().hasClass("formSubmit")){WF.Utils.trackVS({"event":"LinkActivated","eventType":e.type,"eventDescription":"CTAText","clist":clist,"linkText":textSignOn});}if($(this).is(".taskSecondstate")){WF.Utils.trackVS({"event":"LinkActivated","eventType":e.type,"eventDescription":"ExpandTaskBar","destinationUrl":destination,"clist":"","taskSlot":numTask45});}if($(this).is(".task input.c7")){WF.Utils.trackVS({"event":"LinkActivated","eventType":e.type,"eventDescription":"CTAtext","destinationUrl":destinationGoButton,"clist":"","taskSlot":numTask45});}if($(this).parents().hasClass("c63contentMain")){WF.Utils.trackVS({"event":"LinkActivated","eventType":e.type,"eventDescription":"CTAText","destinationUrl":destination,"clist":clist,"linkText":text});}});},fadeInComponents:function(){var $fadeInElement=$(".fadeInElement");var $window=$(window);var recommendedFlag=true;var largePromoflag=true;var communityFlag=true;function myFunc(elem){if($(elem).find("div").hasClass("iaRendered")){var largeSlot,largeOffer,largeLang;var $elem=$(elem).find(".iaRendered");largeSlot=$elem.data("slot-id");largeOffer=$elem.data("offer-id");largeLang=$elem.attr("lang");var total=largeSlot+":"+largeOffer+":"+largeLang;if((largePromoflag)&&($(elem).is(".largePromo"))){WF.Utils.trackTas({"RequestType":"ServeConfirm","pageUrl":window.location.href,"deviceType":"desktop","displayed":total});largePromoflag=false;}if((recommendedFlag)&&($(elem).is(".hpAdditional"))){var $elem=$(elem).find("div.iaRendered");var arrayLength=$elem.length;var recSlot,recOffer,recLang;var total=[];for(var i=0;i<arrayLength;i++){recSlot=$elem.eq(i).data("slot-id");recOffer=$elem.eq(i).data("offer-id");recLang=$elem.eq(i).attr("lang");total.push(recSlot+":"+recOffer+":"+recLang);}WF.Utils.trackTas({"RequestType":"ServeConfirm","pageUrl":window.location.href,"deviceType":"desktop","displayed":total.join()});recommendedFlag=false;}}}function animateElement(){var windowHeight=$window.height();var windowTopPosition=$window.scrollTop();var windowBottomPosition=(windowTopPosition+windowHeight);$.each($fadeInElement,function(){var $element=$(this);var elementHeight=$element.outerHeight();var elementTopPosition=$element.offset().top;var elementBottomPosition=(elementTopPosition+elementHeight);if((elementBottomPosition>=windowTopPosition)&&(elementTopPosition<=windowBottomPosition)){if($element.hasClass("largePromo")){myFunc($(".largePromo"));
}if($element.hasClass("hpAdditional")){myFunc($(".hpAdditional"));$(".wrapper").each(function(i){var t=$(this);setTimeout(function(){t.fadeIn(500);},(i+1)*500);});}if($element.hasClass("bottomRegion")){communityFlag=false;}$element.animate({"opacity":"1"},1000);if((!recommendedFlag&&!largePromoflag&&!communityFlag)){$window.off("scroll",animateElement);}}});}$window.on("scroll",animateElement);$window.trigger("scroll");},handleSignOnFormSubmit:function(){$("#frmSignon").on("submit",function(){var _this=$(this);if(typeof _this.data("disabledOnSubmit")==="undefined"){if(_this.data("loginApp")){_this.find("#jsenabled").attr("value","true");}_this.find("input[type=submit]").attr("disabled",true);_this.data("disabledOnSubmit",{submitted:true});return true;}else{return false;}});},hideAccountsDropdownOnFatNav:function(){$("ul#fatnav").on("fatnavopen",function(){var focusedField;if($("#destination").is(":focus")){focusedField=$("#destination");focusedField.blur();$(this).data("focusedField",focusedField);}}).on("fatnavclose",function(){var focusedField=$(this).data("focusedField");if(focusedField){focusedField.focus();$(this).data("focusedField",null);}});}};$(document).ready(function(){WF.Browser.supports=WF.Utils.getBrowserSupport();WF.OnLoads.doAll();$("div#shell").append($("div.c29content"));WF.Utils.deferredLoadingActionsOnReady();});$(window).on("load",function(){WF.Utils.deferredLoadingActionsOnLoad(0);(function(){var firstFrameMarquee=$(".carouselFrame.item1");var marqueeClist=firstFrameMarquee.find("div.c3Img");var clist=WF.Utils.getClist(marqueeClist);var framesNba=$(".carouselFrameWrapper .carouselFrame");var firstFrameNba=framesNba.eq(0);var clist2=WF.Utils.getClist(firstFrameNba);setTimeout(function(){WF.Utils.trackVS({"event":"PageLoad","eventDescription":"DisplayMarqueeCarouselItem","clist":clist});WF.Utils.trackVS({"event":"PageLoad","eventDescription":"DisplayRibbonCarouselItem","clist":clist2});},0);})();});WF.Page={"lang":$("html").attr("lang")||"en","Components":{getByType:function(type){switch(type){case"BalloonHelp":return this.BalloonHelps;break;default:return[];}},"BalloonHelps":[],"SaveUserName":false,"Carousels":[],"RibbonCarousels":[],"FatNav":false},"deferredTriggered":false};WF.Component.Carousel=function(el,options){var self=this;var hasCycled=false;var stdOptions={"autostart":false,"autoloop":false,"frameRate":8000,"loop":true,"paddles":"dynamic","speed":600,"componentType":"Carousel"};if(!options){options={};}for(var o in stdOptions){if(typeof options[o]=="undefined"){options[o]=stdOptions[o];}}if(options.paddles=="dynamic"){if(WF.Browser.supports&&WF.Browser.supports.touch){options.paddles="off";}if($("html").hasClass("ie7")){options.paddles="on";}}options.width=$(el).width();options.padding=$(el).css("padding-left");var timer,curFrame,incomingFrame;this.elem=el;this.start=function(){timer=setInterval(function(){self.next(false,{"event":"LinkActivated","eventType":"autoload","eventDescription":evtDesc});},options.frameRate);};this.stop=function(){clearInterval(timer);};this.next=function(human,track){if(human){clearInterval(timer);hasCycled=true;}var showing=curFrame;var opts={dir:"right"};if(showing>=bodies.length){if(!options.loop){return;}showing=1;hasCycled=true;}else{showing++;}if(track){var marqueeClist;marqueeClist=$(bodies[showing-1]).find("div.c3Img");track.clist=WF.Utils.getClist(marqueeClist);if($(bodies[showing-1]).find(" .iaRendered, .cmsDefault").length>0){WF.Utils.trackVS(track);}}this.showFrame(showing,opts);if(showing==1&&!options.autoloop&&!human){clearInterval(timer);}};this.prev=function(human,track){if(human){clearInterval(timer);hasCycled=true;}var showing=curFrame;var opts={dir:"left"};if(showing<=1){if(!options.loop){return;}showing=bodies.length;}else{showing--;}if(track){var marqueeClist;marqueeClist=$(bodies[showing-1]).find("div.c3Img");track.clist=WF.Utils.getClist(marqueeClist);if($(bodies[showing-1]).find(".iaRendered, .cmsDefault").length>0){WF.Utils.trackVS(track);}}this.showFrame(showing,opts);};this.copyFrame=function(from,to){to.html(from.html());$.each(["cid","ctid","presentation"],function(i,val){to.data(val,from.data(val));});};this.showFrame=function(num,opts){if(num==curFrame){return;}var inactiveDots=$(el).find(".controls a").not(".current").children("img").attr("src"),inactiveDotsAltText=$(el).find(".controls a").not(".current").children("img").attr("alt"),activeDot=$(el).find(".controls a.current img").attr("src"),activeDotAltText=$(el).find(".controls a.current img").attr("alt");var incFrame=$(el).find(".carouselFrame.item"+num);self.copyFrame(incFrame,incomingFrame);var animOpts={queue:false,left:0};var plusWidth=options.width+"px";var minusWidth="-"+options.width+"px";if(opts.dir=="left"){incomingFrame.css("left",minusWidth);}else{if(opts.dir=="right"){incomingFrame.css("left",plusWidth);}else{if(num>curFrame){incomingFrame.css("left",plusWidth);}else{incomingFrame.css("left",minusWidth);}}}incomingFrame.show();$(el).find(".controls a").removeClass("current").removeAttr("tabindex").removeAttr("role").children("img").attr({"src":inactiveDots,"alt":inactiveDotsAltText});$(el).find(".controls a").not("current").each(function(){var inactiveText=$(this).children("span").text();var inactiveTextValue=inactiveText.replace(/(\d.*?\d.*?)(.*)/,"$1");$(this).children("span").text(inactiveTextValue);});incomingFrame.animate(animOpts,options.speed,"swing",function(){incomingFrame.hide();$(el).find(".carouselFrame:visible").hide();incFrame.show();$(el).find(".controls a.show"+num).addClass("current").attr("tabindex",-1).attr("role","presentation").children("img").attr({"src":activeDot,"alt":activeDotAltText});var activeText=$(el).find(".controls a.current").children("span").text();$(el).find(".controls a.current").children("span").empty();$(el).find(".controls a.current").children("span").append(activeText+WF.Strings.Shared.activeDefaultText[WF.Page.lang]);});if(opts.stopAutoplay){self.stop();hasCycled=true;}if(options.componentType=="Marquee"&&num!=1){var tasCallData=WF.Utils.getTasCallData(incomingFrame,true);if(tasCallData){tasCallData.RequestType="ServeConfirm";tasCallData.displayed=tasCallData.displayed;tasCallData.deviceType="desktop";tasCallData.pageUrl=window.location.href;WF.Utils.trackTas(tasCallData);}}curFrame=num;};this.count=function(){return bodies.length;};this.leftLinkClick=function(evt){evt.preventDefault();var $this=$(this).off("click",this.leftLinkClick);self.prev(true,$.extend($(this).data("vsObj"),{eventType:evt.type}));setTimeout(function(){$this.on("click keypress",self.leftLinkClick);},options.speed);};this.rightLinkClick=function(evt){evt.preventDefault();var $this=$(this).off("click",this.rightLinkClick);self.next(true,$.extend($(this).data("vsObj"),{eventType:evt.type}));setTimeout(function(){$this.on("click keypress",self.rightLinkClick);},options.speed);};var evtDesc;switch(options.componentType){case"Marquee":case"MarqueeCarousel":evtDesc="DisplayMarqueeCarouselItem";break;case"Small":case"SmallCarousel":evtDesc="DisplaySmallCarouselItem";break;case"Tip":default:evtDesc="DisplayTip";}var marqueeClist=$(el).find("div.c3Img");var clist=WF.Utils.getClist(marqueeClist);var bodies=$(el).find(".carouselFrame, .c26body");$.each(bodies,function(idx,body){body=$(body);body.addClass("item"+(idx+1));});if(bodies.length>1){incomingFrame=$('<div class="carouselFrame incomingFrame"/>');$(el).append(incomingFrame);var controls=$('<div class="controls"/>');for(var i=1,j=bodies.length;i<=j;i++){$(bodies[i-1]).prepend($('<span class="hidden">'+WF.Strings.Shared.beginItemNo[WF.Page.lang]+i+"</span>"));$(bodies[i-1]).append($('<span class="hidden">'+WF.Strings.Shared.endItemNo[WF.Page.lang]+i+"</span>"));var imgDots=$("<img/>"),imgDotCurrent=$("<img/>");var dot=$('<a href="#_frame'+i+'" class="show'+i+'"><span class="hidden"></span></a>');if(i==1){$(dot).attr("role","presentation").append(imgDotCurrent).children("img").attr("alt","");$(dot).find(".hidden").append(WF.Strings.Shared.item[WF.Page.lang]+" "+i+WF.Strings.Shared.of[WF.Page.lang]+bodies.length+WF.Strings.Shared.activeDefaultText[WF.Page.lang]);
}else{$(dot).append(imgDots).children("img").attr("alt","");$(dot).find(".hidden").append(WF.Strings.Shared.item[WF.Page.lang]+" "+i+WF.Strings.Shared.of[WF.Page.lang]+bodies.length);}dot.bind("click keypress",function(evt){var num=this.className.match(/show(\d+)/)[1];if(evt.type=="keypress"&&evt.keyCode!=13){return;}incFrame=$(el).find(".carouselFrame.item"+num);var marqueeClist=$(incFrame).find("div.c3Img");var clist=WF.Utils.getClist(marqueeClist);if(incFrame.find(".iaRendered, .cmsDefault").length>0){WF.Utils.trackVS({"event":"LinkActivated","eventType":evt.type,"eventDescription":evtDesc,"clist":clist,"tipNumber":num,"elementActivated":"Bottom"});}if(evt.type=="keypress"){evt.preventDefault();self.showFrame(this.className.replace(/\D/g,""),{stopAutoplay:true});}});$(controls).append(dot);if(i==1){$(controls).find(".show"+i).addClass("current").attr("tabindex",-1);}$(controls).find(".show"+i).click(function(evt){evt.preventDefault();self.showFrame(this.className.replace(/\D/g,""),{stopAutoplay:true});});$(bodies[i-1]).hide();if($.fn.touchwipe){$(bodies[i-1]).touchwipe({wipeLeft:function(evt){evt.preventDefault();self.next(true);},wipeRight:function(evt){evt.preventDefault();self.prev(true);}});}if(i<j){$(el).append(controls);}if(dot.hasClass("current")){WF.Utils.setImageSrcFromBackground(imgDotCurrent,"Item current dot; imgDotCurrent");}else{WF.Utils.setImageSrcFromBackground(imgDots,WF.Strings.Shared.item[WF.Page.lang]+" "+i+"; imgDots");}}if(options.paddles!="off"){var paddles=$('<div id="constructingPaddles">'),paddle1=$('<div class="paddles"/>'),paddle2=$('<div class="paddles"/>'),link1=$("<a/>"),link2=$("<a/>"),img1=$("<img/>"),img2=$("<img/>");paddles.append(paddle1);paddles.append(paddle2);var setTabindex=false;if(options.paddles=="on"){paddles.find(".paddles").addClass("alwaysOn");}else{setTabindex=true;setInterval(function(){if(paddle1.find("a.left").css("left")=="-27px"){paddle1.css("visibility","hidden");paddle2.css("visibility","hidden");}else{paddle1.css("visibility","visible");paddle2.css("visibility","visible");}},10);}link1.attr({"href":"#_prevFrame","class":"left"});if(setTabindex){link1.attr("tabindex",-1);}img1.attr("alt",WF.Strings.Shared.prev[WF.Page.lang]);paddle1.append(link1);link1.append(img1);link2.attr({"href":"#_nextFrame","class":"right"});if(setTabindex){link2.attr("tabindex",-1);}img2.attr("alt",WF.Strings.Shared.next[WF.Page.lang]);paddle2.append(link2);link2.append(img2);paddles.find(".left").data("vsObj",{"event":"LinkActivated","eventDescription":evtDesc,"clist":clist,"elementActivated":"LeftPaddle"});paddles.find(".left").on("click",this.leftLinkClick);paddles.find(".left").bind("click keypress",function(evt){if(evt.type=="keypress"&&evt.keyCode!=13){return;}if(evt.type=="keypress"){evt.preventDefault();self.prev(true,$.extend($(this).data("vsObj"),{eventType:evt.type}));}});paddles.find(".right").data("vsObj",{"event":"LinkActivated","eventDescription":evtDesc,"clist":clist,"elementActivated":"RightPaddle"});paddles.find(".right").on("click",this.rightLinkClick);paddles.find(".right").bind("click keypress",function(evt){if(evt.type=="keypress"&&evt.keyCode!=13){return;}if(evt.type=="keypress"){evt.preventDefault();self.next(true,$.extend($(this).data("vsObj"),{eventType:evt.type}));}});$(el).prepend(paddle1);$(el).append(paddle2);WF.Utils.setImageSrcFromBackground(img1,"10Carousel 5902; img1");WF.Utils.setImageSrcFromBackground(img2,"10Carousel 5903; img2");}$(el).find(".carouselFrame.item1").fadeIn(1000,WF.Component.TaskbarStaticItems);incomingFrame.hide();curFrame=1;if(options.autostart){this.start();}}else{$(bodies[0]).show();}if(options.componentType.substr(0,5)=="Small"){clist=WF.Utils.getClist(bodies[0]);}$("#taskbar").hover(function(){self.stop();},function(){if(!hasCycled){self.start();}});WF.Page.Components.Carousels.push(this);return this;};WF.OnLoads.setupCarousels=function(){if(typeof root=="undefined"){root=$("body");}$(root).find(".c3wrapper").each(function(){new WF.Component.Carousel(this,{componentType:"Marquee",paddles:"on",autostart:true,});});};WF.Component.RibbonCarousel=function(el,options){var self=this;var stdOptions={"autostart":false,"autoloop":false,"frameRate":8000,"loop":true,"paddles":"on","speed":500,"delayPaddles":0,"sortOrder":true,"Tip":false};if(!options){options={};}for(var o in stdOptions){if(typeof options[o]=="undefined"){options[o]=stdOptions[o];}}this.elem=el;var ribbonItemsLength=$(this.elem).find(".c63controls li").length;this.sortOrder=function(a,b){return($(a).data("order"))-($(b).data("order"));};if(options.sortOrder===true){var dataOrder=$(".c63controls li").eq(0).data("order");if(dataOrder&&dataOrder!=""&&dataOrder!="null"){$(".c63controls li").sort(this.sortOrder).appendTo(".c63controls");$(".carouselFrameWrapper .carouselFrame").sort(this.sortOrder).appendTo(".carouselFrameWrapper");}}var curFrame,evtDesc="DisplayRibbonCarouselItem",incomingFrame,wrapLength,onlySixFrames=false,autoFirstFrame=0,specialFrameId="fraud";var ribbonWrapper=$(this.elem).find(".c63controlsWrapper");var ribbon=$(this.elem).find("ul.c63controls"),ribbonItems=ribbon.find("li"),bodies=$(el).find(".carouselFrame");this.buildMultiframeHtml=function(){incomingFrame=$('<div class="carouselFrame incomingFrame"/>');$(el).append(incomingFrame);if(ribbonItems.length!=bodies.length){var only=(ribbonItems.length>bodies.length)?"only ":"";alert("There are "+ribbonItems.length+" items in the top ribbon (ul.c63controls), but "+only+bodies.length+" carouselFrame divs!");return false;}};this.buildPaddles=function(){var leftImg=$('<img alt="'+WF.Strings.Shared.prev[WF.Page.lang]+'"/>');var rightImg=$('<img alt="'+WF.Strings.Shared.next[WF.Page.lang]+'"/>');var leftLink=$('<a href="Javascript:void(0);" class="paddle prevPaddle" role="button" tabindex="-1" aria-hidden="true"></a>');leftLink.append(leftImg);var rightLink=$('<a href="Javascript:void(0);" class="paddle nextPaddle" role="button" tabindex="-1" aria-hidden="true"></a>');rightLink.append(rightImg);leftLink.on("click",this.leftLinkClick);rightLink.on("click",this.rightLinkClick);ribbonWrapper.before(leftLink);ribbonWrapper.after(rightLink);WF.Utils.setImageSrcFromBackground(leftImg,"18RibbonCarousel 6428; leftImg");WF.Utils.setImageSrcFromBackground(rightImg,"18RibbonCarousel 6429; rightImg");};this.leftLinkClick=function(evt){evt.preventDefault();var $this=$(this).off("click",this.leftLinkClick);self.prev();ribbon.find("li").removeAttr("tabindex").attr({"aria-expanded":false,"aria-selected":false});ribbon.find(".show"+curFrame).attr({"tabindex":0,"aria-expanded":true,"aria-selected":true});WF.Utils.trackVS({"event":"LinkActivated","eventType":evt.type,"eventDescription":evtDesc,"clist":self.retrieveClist(),"elementActivated":"LeftPaddle"});setTimeout(function(){$this.on("click",self.leftLinkClick);},parseInt(options.speed)+parseInt(options.delayPaddles));};this.rightLinkClick=function(evt){evt.preventDefault();var $this=$(this).off("click",this.rightLinkClick);self.next();ribbon.find("li").removeAttr("tabindex").attr({"aria-expanded":false,"aria-selected":false});ribbon.find(".show"+curFrame).attr({"tabindex":0,"aria-expanded":true,"aria-selected":true});WF.Utils.trackVS({"event":"LinkActivated","eventType":evt.type,"eventDescription":evtDesc,"clist":self.retrieveClist(),"elementActivated":"RightPaddle"});setTimeout(function(){$this.on("click",self.rightLinkClick);},parseInt(options.speed)+parseInt(options.delayPaddles));};this.copyFrame=function(from,to){to.html(from.html());$.each(["cid","ctid","presentation"],function(i,val){to.data(val,from.data(val));});};this.count=function(){return bodies.length;};this.frameIdToNumber=function(id){var frame=$(ribbon).find('li[data-ia-code="'+id+'"]');if(!frame.length){return null;}var num=frame.attr("class").match(/show(\d+)/)[1];return parseInt(num,10);};this.getFrameByNumber=function(num){return $(ribbon).find("li.show"+num);};this.handleAutoFirstFrame=function(){var specialTargetFrameNum=ribbonItems.length-1;
if(WF.Component.RibbonCarousel.autoFirstFrame){if(typeof WF.Component.RibbonCarousel.autoFirstFrame=="string"){WF.Component.RibbonCarousel.autoFirstFrame=self.frameIdToNumber(WF.Component.RibbonCarousel.autoFirstFrame);}self.swapFrames(WF.Component.RibbonCarousel.autoFirstFrame,1);}if(specialFrameId){var specialFrameNum=self.frameIdToNumber(specialFrameId);if(specialFrameNum!=specialTargetFrameNum){self.swapFrames(self.frameIdToNumber(specialFrameId),specialTargetFrameNum);}}};this.next=function(){var showing=curFrame;if(showing>=wrapLength){showing=1;}else{showing++;}if(onlySixFrames){ribbon.find("li:first").replaceWith(ribbon.find("li:nth-child(2)").clone(true));}ribbon.css("top",(parseInt(ribbon.css("top"),10)+123)+"px").find("li:first").appendTo(ribbon);this.showFrame(showing);};this.numberBodies=function(){$.each(bodies,function(idx,body){body=$(body);body.addClass("item"+(idx+1));});};this.prev=function(){var showing=curFrame;if(showing<=1){showing=wrapLength;}else{showing--;}if(onlySixFrames){ribbon.find("li:last").replaceWith(ribbon.find("li:nth-child(6)").clone(true));}ribbon.css("top",(parseInt(ribbon.css("top"),10)-123)+"px").find("li:last").prependTo(ribbon);this.showFrame(showing);};this.retrieveClist=function(){var visibleCarouselFrame=$(el).find(".item"+curFrame);return $(visibleCarouselFrame).data("cid")+"~"+$(visibleCarouselFrame).data("ctid");};this.setupBodyLinkTasCalls=function(num){$.each(bodies,function(idx,body){var $body=$(body),num=$body.attr("class").match(/item(\d+)/)[1],offerId;offerId=$(".c63controls").find("li.show"+num).data("iaCode");$(body).find("a").each(function(){var el=$(this);if(el.hasClass("iaRendered")){return true;}if(el.hasClass("cmsDefault")){return true;}el.click(function(evt){var findNumber=$(this).closest(".carouselFrame").data("order");var findNumber2=$(".c63controls").find("li.show"+num).data("order");if(($.isNumeric(findNumber))||($.isNumeric(findNumber2))){var nbaCar=$(this).closest(".carouselFrame");var nbaSlot=tasInfo.ribbonCarouselSlotId;var nbaCoid=$(nbaCar).data("ia-code");var curFrame=num;WF.Utils.trackTas({"slotId":nbaSlot,"deviceType":"desktop","presentationOrderWithinSlot":curFrame,"language":WF.Page.lang,"pageURL":"https://www.wellsfargo.com/Clickthrough","COID":nbaCoid});}});});});};this.setupBodyClassesAndHandlers=function(){var tabPanel;for(var i=1,j=bodies.length;i<=j;i++){tabPanel=$(bodies[i-1]);tabPanel.attr("tabIndex","0");tabPanel.prepend($('<span class="hidden">'+WF.Strings.Shared.beginItemNo[WF.Page.lang]+i+"</span>"));tabPanel.append($('<span class="hidden">'+WF.Strings.Shared.endItemNo[WF.Page.lang]+i+"</span>"));tabPanel.hide();if($.fn.touchwipe){tabPanel.touchwipe({wipeLeft:function(evt){evt.preventDefault();self.next(true);},wipeRight:function(evt){evt.preventDefault();self.prev(true);}});}}};this.setupRibbonClassesAndHandlers=function(){for(var i=1,j=ribbonItems.length;i<=j;i++){if(!ribbonItems[i-1].id){ribbonItems[i-1].id=("nbaDefault"+i);}if(!(bodies[i-1]).id){(bodies[i-1]).id=("nbaDefaultPanels"+i);}$(bodies[i-1]).attr("aria-labelledby",ribbonItems[i-1].id);$(ribbonItems[i-1]).attr({"aria-expanded":false,"aria-selected":false,"aria-controls":$(bodies[i-1]).attr("id"),"aria-posinset":i,"aria-setsize":ribbonItems.length}).addClass("show"+i).bind("click",function(evt){var target=evt.target;if(target.tagName!="LI"){target=$(target).parents("li").get(0);}var x=target.className.match(/show(\d+)\b/)[1];var dir=null;var rItems=ribbon.find("li");if(rItems.index(target)==0){dir="top";}else{if(rItems.index(target)==rItems.length-1){dir="bottom";}}self.shiftTo(x,dir);ribbon.find("li").children("span").remove();ribbon.find("li").removeAttr("tabindex").attr({"aria-expanded":false,"aria-selected":false});$(this).attr({"tabindex":0,"aria-expanded":true,"aria-selected":true}).focus();WF.Utils.trackVS({"event":"LinkActivated","eventType":evt.type,"eventDescription":evtDesc,"clist":self.retrieveClist(),"elementActivated":"RibbonItem"});});$(ribbonItems[i-1]).on("keydown",this.keypressLTRB);$(ribbonItems[i-1]).bind("keypress",function(evt){if($.inArray(evt.keyCode,[13,37,38,39,40])==-1){return;}WF.Utils.trackVS({"event":"LinkActivated","eventType":evt.type,"eventDescription":evtDesc,"clist":self.retrieveClist(),"elementActivated":"RibbonItem"});});}};this.keypressLTRB=function(evt){ribbon.find("li").off("keydown",this.keypressLTRB);if(evt.keyCode==39||evt.keyCode==40){evt.preventDefault();self.next();ribbon.find("li").removeAttr("tabindex").attr({"aria-expanded":false,"aria-selected":false});ribbon.find(".show"+curFrame).attr({"tabindex":0,"aria-expanded":true,"aria-selected":true}).focus();}else{if(evt.keyCode==37||evt.keyCode==38){evt.preventDefault();self.prev();ribbon.find("li").removeAttr("tabindex").attr({"aria-expanded":false,"aria-selected":false});ribbon.find(".show"+curFrame).attr({"tabindex":0,"aria-expanded":true,"aria-selected":true}).focus();}}setTimeout(function(){ribbon.find("li").on("keydown",self.keypressLTRB);},parseInt(options.speed)+parseInt(options.delayPaddles));};this.shiftTo=function(num,dir){var diff=num-curFrame;if(Math.abs(diff)>3){if(diff<0){diff+=ribbonItems.length;}else{diff-=ribbonItems.length;}}if(!dir){if(diff<0){dir="left";}else{dir="right";}}diff=Math.abs(diff);for(var i=0;i<diff;i++){if(dir=="right"){if(onlySixFrames){ribbon.find("li:first").replaceWith(ribbon.find("li:nth-child(2)").clone(true));}ribbon.css("top",(parseInt(ribbon.css("top"),10)+123)+"px").find("li:first").appendTo(ribbon);}else{if(onlySixFrames){ribbon.find("li:last").replaceWith(ribbon.find("li:nth-child(6)").clone(true));}ribbon.css("top",(parseInt(ribbon.css("top"),10)-123)+"px").find("li:last").prependTo(ribbon);}}this.showFrame(num);};this.showFrame=function(num){if(num==curFrame){return;}var incFrame=$(el).find(".carouselFrame.item"+num);var findNumber=incFrame.data("order");var findNumber2=$(".c63controls").find("li.show"+num).data("order");self.copyFrame(incFrame,incomingFrame);$(el).find(".carouselFrame:visible").fadeOut(options.speed);incFrame.fadeIn(options.speed);curFrame=num;ribbon.animate({"top":"-123px"},options.speed);if(num!=1){if(ribbon.find(".show"+num).data("iaCode")==specialFrameId){return;}var displayedItems=[];displayedItems.push(tasInfo.ribbonCarouselSlotId+":"+ribbon.find(".show"+num).data("iaCode")+":"+WF.Page.lang);displayedItems=$.grep(displayedItems,function(val){return !!val;});if(displayedItems.length<1){return;}if(($.isNumeric(findNumber))||($.isNumeric(findNumber2))){WF.Utils.trackTas({"displayed":displayedItems.join(","),"RequestType":"ServeConfirm","deviceType":"desktop","pageUrl":window.location.href,"presentationOrderWithinSlot":num});}}};this.swapFrames=function(arg1,arg2){if(typeof arg1!="number"){return;}if(arg1==arg2){return;}var idx1=arg1-1,idx2=arg2-1;if(arg2>arg1){idx2++;}if(arg2==1){arg2=arg1;arg1=1;}var ribbonItem1=self.getFrameByNumber(arg1),ribbonItem2=self.getFrameByNumber(arg2),body1=$(this.elem).find(".carouselFrame.item"+arg1),body2=$(this.elem).find(".carouselFrame.item"+arg2);var putRibbonAfter=ribbonItem2.prev();var putBodyAfter=body2.prev();if(putRibbonAfter.get(0)==ribbonItem1.get(0)){putRibbonAfter=ribbonItem2;putBodyAfter=body2;}ribbonItem2.detach().removeClass("show"+arg2).addClass("show"+arg1).insertAfter(ribbonItem1);ribbonItem1.detach().removeClass("show"+arg1).addClass("show"+arg2).insertAfter(putRibbonAfter);body2.detach().removeClass("item"+arg2).addClass("item"+arg1).insertAfter(body1);body1.detach().removeClass("item"+arg1).addClass("item"+arg2).insertAfter(putBodyAfter);};this.init=function(){if(options&&options.Tip){evtDesc="DisplayTip";}self.numberBodies();if(bodies.length>1){self.buildMultiframeHtml();if(bodies.length==6){onlySixFrames=true;wrapLength=6;bodies.splice(3,0,$(bodies[3]).clone(true).get(0));}else{wrapLength=bodies.length;}self.setupRibbonClassesAndHandlers();self.handleAutoFirstFrame();if(onlySixFrames){ribbon.find(":nth-child(4)").before(ribbon.find(":nth-child(4)").clone(true));}for(var i=$(ribbonItems).length-0;
i>=0;i--){if($(ribbonItems[i]).hasClass("show1")){$(ribbonItems[i]).attr({"tabindex":0,"aria-expanded":true,"aria-selected":true});}}self.setupBodyClassesAndHandlers();self.setupBodyLinkTasCalls();self.buildPaddles();for(var i=0;i<1;i++){ribbon.find("li:last").prependTo(ribbon);}$(el).find(".carouselFrame.item1").show();incomingFrame.hide();curFrame=1;if($.fn.touchwipe){ribbon.touchwipe({wipeUp:function(evt){evt.preventDefault();self.next();},wipeDown:function(evt){evt.preventDefault();self.prev();}});}}else{$(bodies[0]).show();}};self.init();if(options&&options.Tip){WF.Page.Components.Tips.push(this);}WF.Page.Components.RibbonCarousels.push(this);return this;};WF.OnLoads.setupRibbonCarousels=function(root){if(typeof root=="undefined"){root=$("body");}$(root).find(".c63").each(function(){new WF.Component.RibbonCarousel(this);});};WF.Component.FatNav=function(el){var _this=this,navSelected=null,timer,isDisplaying=false,hoverShowDelay=300,clickShowDelay=0,triggerHideDelay=250,popupHideDelay=150,showSpeed=250,hideSpeed=250,linkEl=null;this.el=el;this.position=function(){navSelected.css("left",_this.el.offset().left-10+"px");navSelected.css("top",(linkEl.offset().top+linkEl.outerHeight()-1)+"px");};this.show=function(anchor,e){var tallestDiv=0;var firstDivClass="navItemLeft";_this.canceltimer();_this.el.find("a.navLevel1").attr("aria-expanded","false");_this.el.find("a.selected").removeClass("selected");linkEl=anchor;navSelected=$("#"+linkEl.attr("data-navitem"));linkEl.addClass("selected");linkEl.attr("aria-expanded","true");$("div.navItem").addClass("hide");_this.position();navSelected.removeClass("hide");$("div.navItem").each(function(){if($(this).hasClass("hide")){$(this).css("display","none");}});var delay;if(e.type=="mouseover"){delay=(isDisplaying)?0:hoverShowDelay;}else{delay=clickShowDelay;}_this.settimer(function(){if(!navSelected){navSelected=$("#"+linkEl.attr("data-navitem"));}if(e.type=="mouseover"){navSelected.filter(":not(:animated)").animate({height:"show"},showSpeed);}else{navSelected.filter(":not(:animated)").animate({height:"toggle"},showSpeed,function(){if(linkEl.next("div").css("display")=="none"){linkEl.attr("aria-expanded","false");linkEl.removeClass("selected");$("div.navItem").css("display","none");}});}navSelected.children("div").each(function(idx){if(idx==0&&this.className){firstDivClass=this.className;}if($(this).innerHeight()>tallestDiv){tallestDiv=$(this).innerHeight();}});navSelected.find("."+firstDivClass).first().css("height",tallestDiv+"px");isDisplaying=true;$(_this.el).trigger("fatnavopen");},delay);};this.hide=function(){_this.el.find("a.navLevel1").attr("aria-expanded","false");_this.el.find("a.navLevel1").removeClass("selected");if(navSelected!=null){navSelected.addClass("hide");navSelected.animate({height:"hide",opacity:"hide"},hideSpeed,function(){$(".navItem").css("display","none");navSelected=null;});}isDisplaying=false;$(_this.el).trigger("fatnavclose");};this.settimer=function(todo,time){timer=window.setTimeout(todo,time);};this.canceltimer=function(){if(timer){window.clearTimeout(timer);timer=null;}};this.setup=function(){$("div.navItem").each(function(){var temp;temp=$(this).detach();_this.el.find("a.navLevel1").each(function(){if(temp.attr("id")==$(this).attr("data-navitem")){temp.insertAfter($(this));}});});if(WF.Browser.supports.touch){$(document).bind("touchstart",function(e){if($(e.target).is("#"+_this.el.attr("id")+" *")){return true;}else{_this.hide();}});}_this.el.find("a.navLevel1").click(function(e){_this.show($(this),e);e.preventDefault();});_this.el.find("a.navLevel1").bind("mouseover",function(e){_this.show($(this),e);});_this.el.find("a.navLevel1").bind("mouseout",function(e){_this.canceltimer();_this.settimer(_this.hide,triggerHideDelay);});_this.el.keydown(function(e){var target=$(e.target);if(target.is("a.navLevel1")==true&&e.keyCode==13){_this.show($(target),e);e.preventDefault();}if(e.keyCode==27){_this.el.find("a.selected").focus();_this.hide();}});_this.el.find("div.navItem").bind("mouseover",function(e){_this.canceltimer();});_this.el.find("div.navItem").bind("mouseout",function(e){_this.settimer(_this.hide,popupHideDelay);});var firstItem=$("#fatnav li a.navLevel1");var lastItem=$("li div.navItem");var fatnavItemLength=firstItem.length;for(var i=0;i<fatnavItemLength;i++){firstItem.eq(i).on("keydown",function(e){if(e.shiftKey===true&&e.keyCode===9){_this.settimer(_this.hide,popupHideDelay);}});var lastitemFatnav=lastItem.eq(i).find("div").last();if(lastitemFatnav.attr("id")==="fatnav_footnote"){lastitemFatnav=lastitemFatnav.prev();}else{lastitemFatnav=lastitemFatnav.next();}lastitemFatnav.find("li:last-child a").on("keydown",function(e){if(e.keyCode===9){if(e.shiftKey){_this.canceltimer();}else{_this.settimer(_this.hide,popupHideDelay);}}});}};$(window).resize(function(){if(navSelected!=null){_this.position();}});WF.Page.Components.FatNav=this;this.setup();return this;};WF.OnLoads.setupFatNav=function(root){if(typeof root=="undefined"){root=$("body");}if(WF.Page.Components.FatNav){return;}if($(root).find("#fatnav").length>0){new WF.Component.FatNav($("#fatnav"));}};WF.Component.BalloonHelp=function(trigger,options){if(!$(trigger).data("contentId")){WF.Utils.ajaxLog({"message":'A Balloon Help link (CSS class c29link) must have a data-content-id attribute, but "'+$(trigger).text()+"\" doesn't!"});return false;}this.elem=trigger;this.id="BalloonHelp_"+trigger.id;var self=this;var link_id=trigger.id,content_id,content_div,mouseoutDelay=300,suppressNext=false;var stdOptions={"offsetX":-10,"offsetY":8,"popupSpeed":500,"paddingTop":20,"paddingBottom":20,"marginBottom":10};if($(trigger).data("content-id")){content_id=$(trigger).data("content-id");content_div=$('.c29content[data-content-id="'+content_id+'"]:first');}else{if(trigger.id&&trigger.id.search(/link/)!=-1){content_id=link_id.replace(/link/,"content");content_div=$("#"+content_id);}else{WF.Utils.ajaxLog({"message":"Can't find Balloon Help content identifier for link with text \""+$(trigger).text()+'"!'});return false;}}if(!options){options={};}for(var o in stdOptions){if(typeof options[o]=="undefined"){options[o]=stdOptions[o];}}trigger=$(trigger);var clist=trigger.data("cid")+"~"+trigger.data("ctid");if(content_div.length!=1){WF.Utils.ajaxLog({"message":"Can't find Balloon Help content div #"+content_id+" to match link #"+link_id+"!"});return false;}if($.trim(trigger.text()).length<1&&trigger.html().search(/<img /)!=-1){trigger.addClass("imgOnly");}if(content_div.attr("role")!="complementary"){var closeBtn=$("<img/>").attr({"alt":WF.Strings.Shared.close[WF.Page.lang]});content_div.prepend($('<span class="c29close"><a href=""></a></span>')).find(".c29close a").bind("click keypress",function(evt){self.hide(evt);evt.preventDefault();$(trigger).focus();});content_div.find(".c29close a").append(closeBtn);WF.Utils.setImageSrcFromBackground(closeBtn,"14BalloonHelp 75; closeBtn");content_div.append($('<span class="c29hook"></span>'));content_div.prepend($('<span class="hide c29begin">'+WF.Strings.Components.BalloonHelp.beginningOfPopup[WF.Page.lang]+"</span>"));content_div.append($('<span class="hide">'+WF.Strings.Components.BalloonHelp.endOfPopup[WF.Page.lang]+"</span>"));content_div.attr({"role":"complementary","aria-labelledby":link_id});}this.getQuadrant=function(pos,size){var scroll={"top":$(window).scrollTop(),"left":$(window).scrollLeft()};var bounds=WF.Utils.getViewportSize();var vert="b",horz="l";if((pos.top-scroll.top)<bounds.height/2){vert="t";}if((pos.left-scroll.left)>bounds.width/2){horz="r";}return vert+horz;};this.hide=function(evt,speed){if(typeof evt!="undefined"){if(evt.type=="keypress"&&evt.keyCode!=13&&evt.keyCode!=27){return;}evt.preventDefault();}if(typeof speed=="undefined"){speed=options.popupSpeed;}content_div.data("stayOpen","false");trigger.removeClass("hover");content_div.fadeOut(speed,function(){$(this).removeAttr("tabindex");if(typeof evt!="undefined"&&(evt.type=="keypress"||evt.type=="click")){suppressNext=true;
trigger.focus();}});};this.maybeHide=function(evt){if(content_div.data("stayOpen")=="true"||trigger.data("active")=="true"){return;}self.hide(evt);};this.setPosition=function(){var trigger_pos=trigger.offset();var trigger_size=WF.Utils.getDimensions(trigger);var dir=self.getQuadrant(trigger_pos);switch(dir){case"tl":content_div.css({"top":(trigger_pos.top+trigger_size.height+options.marginBottom+options.offsetY)+"px","left":(trigger_pos.left+options.offsetX)+"px"});break;case"tr":content_div.css({"top":(trigger_pos.top+trigger_size.height+options.marginBottom+options.offsetY)+"px","right":($("body").width()-(trigger_pos.left+trigger_size.width)+options.offsetX)+"px"});break;case"bl":content_div.css({"top":(trigger_pos.top-content_div.height()-options.offsetY-options.paddingBottom-options.paddingTop-options.marginBottom)+"px","left":(trigger_pos.left+options.offsetX)+"px"});break;case"br":content_div.css({"top":(trigger_pos.top-content_div.height()-options.offsetY-options.paddingBottom-options.paddingTop-options.marginBottom)+"px","right":($("body").width()-(trigger_pos.left+trigger_size.width)+options.offsetX)+"px"});break;}content_div.removeClass("tl").removeClass("tr").removeClass("bl").removeClass("br").addClass(dir);};this.show=function(evt){if((evt.type=="keyup"&&evt.keyCode!=13)||evt.type=="focus"){return;}if(content_div.is(":visible")){content_div.find(".c29begin.hide").attr("tabindex",0).focus();return;}var trgt=evt.target||evt.srcElement;if(trgt.getAttribute("isClickable")!="true"){evt.preventDefault();}self.setPosition();trigger.addClass("hover");content_div.fadeIn(options.popupSpeed,function(){$(this).attr("tabindex",-1);if(evt.type!="mouseover"){$(this).focus();}});};trigger.bind("click",function(evt){var trgt=evt.target||evt.srcElement;if(trgt.getAttribute("isclickable")!="true"){evt.preventDefault();}$(".c29content").data("stayOpen","false");content_div.data("stayOpen","true");$.each(WF.Page.Components.BalloonHelps,function(i,bh){if(bh.id!=self.id){bh.maybeHide();}});if(this.type!="checkbox"||(this.type=="checkbox"&&this.checked)){self.show(evt);}WF.Utils.trackVS({"event":"LinkActivated","eventType":"click","eventDescription":"DisplayBalloonHelp","clist":clist});});trigger.bind("keypress",function(evt){if(evt.keyCode!=13){return;}evt.preventDefault();$(this).keyup();});trigger.bind("keyup",function(evt){if(evt.keyCode!=13){return;}evt.preventDefault();$(".c29content").data("stayOpen","false");content_div.data("stayOpen","true");$.each(WF.Page.Components.BalloonHelps,function(i,bh){if(bh.id!=self.id){bh.maybeHide();}});self.show(evt);WF.Utils.trackVS({"event":"LinkActivated","eventType":"keypress","eventDescription":"DisplayBalloonHelp","clist":clist});});trigger.bind("mouseover",function(evt){if(trigger.attr("triggerHover")=="false"){return;}trigger.data("active","true").addClass("hover");if(suppressNext){suppressNext=false;return;}if($(".c29content:visible").length){return;}self.show(evt);});trigger.bind("mouseout blur",function(evt){if(trigger.attr("triggerHover")=="false"){return;}trigger.data("active","false");if(content_div.is(":focus")){trigger.removeClass("hover");}setTimeout(function(ev){self.maybeHide(ev);},mouseoutDelay);});content_div.bind("focus mouseover",function(evt){trigger.data("active","true").addClass("hover");self.show(evt);});content_div.bind("mouseout blur",function(evt){trigger.data("active","false").removeClass("hover");setTimeout(function(ev){self.maybeHide(ev);},mouseoutDelay);});content_div.bind("keypress",function(evt){if(evt.keyCode==27){self.hide(evt);}});WF.Page.Components.BalloonHelps.push(this);return this;};WF.OnLoads.setupBalloonHelps=function(root){if(typeof root=="undefined"){root=$("body");}$(root).find(".c29link").each(function(){new WF.Component.BalloonHelp(this);});};WF.Component.SaveUserName=function(trigger){this.elem=trigger;this.id="saveusername";var self=this;var usrName=$("#userid");var hdnSaveUsrName=$("#save-username");$("#hdnuserid").val($("#userid").val());var triggerClicked=false;var ctrlDown=false;var ctrlKey=17,vKey=86;var toggleUserId=function(){var saveUsrObj=$("#saveusername");if($("#userid").val()==""){saveUsrObj.removeAttr("checked");$("#save-username").val("false");}else{if($("#userid").val()!=$("#hdnuserid").val()&&$("#hdnuserid").val()!=""&&!triggerClicked){$("#saveusername").prop("checked",false);$("#save-username").val("false");}if($("#saveusername").is(":checked")){$("#save-username").val("true");}}};toggleUserId();if(usrName.val()!=""){trigger.setAttribute("checked","checked");hdnSaveUsrName.val("true");}$(trigger).bind("click",function(evt){triggerClicked=true;if(!this.checked){usrName.val("");hdnSaveUsrName.val("false");}else{hdnSaveUsrName.val("true");}});usrName.bind("keydown",function(e){if(e.keyCode!=ctrlKey){setTimeout(function(){toggleUserId();},18);}});usrName.bind("keyup",function(e){if(e.keyCode!=ctrlKey){setTimeout(function(){toggleUserId();},18);}});usrName.bind("paste",function(){setTimeout(function(){toggleUserId();},3);});usrName.bind("cut",function(){setTimeout(function(){toggleUserId();},3);});$("#saveusername").change(function(){var ischecked=$(this).is(":checked");if(!ischecked){$(".c29content").hide();}});WF.Page.Components.SaveUserName=this;return this;};WF.OnLoads.setupSaveUserName=function(root){if(typeof root=="undefined"){root=$("body");}$(root).find("#saveusername").each(function(){new WF.Component.SaveUserName(this);});};WF.Component.TaskbarStaticItems=function(){taskBarAnimation();var delayIcon=400;$("div.taskSecondstate").attr("aria-expanded","false");$("div.taskSecondstate").on("click",function(e){var attr=$(this).find(".taskImageContainer");if(typeof attr!==typeof undefined&&attr!==false){taskbarShowHide(this);}});$("div.taskSecondstate").on("keypress",function(e){var attr=$(this).find(".taskImageContainer");if(typeof attr!==typeof undefined&&attr!==false&&e.keyCode==13){taskbarShowHide(this);}});function taskBarAnimation(){var delay=500,displayTaskbar=1000,displayListItemsOBO=100,fadeInListItem=1800;setTimeout(function(){$("#taskbar").animate({bottom:0},displayTaskbar,function(){$(".taskContentWrapper").each(function(i){var t=$(this);setTimeout(function(){t.fadeIn(fadeInListItem);},(i+1)*displayListItemsOBO);});});},delay);}function taskbarShowHide(obj){if((!$(obj).hasClass("activeState"))){if($("div.taskSecondstate").hasClass("activeState")){$(".activeState").attr("aria-expanded","false");$(".activeState").find(".taskImageContainer").delay(delayIcon).show(0);$(".activeState").siblings(".taskHiddenContent").slideUp();$(".activeState").removeClass("activeState");}$(obj).addClass("activeState");$(obj).attr("aria-expanded","true");$(obj).find(".taskImageContainer").hide();$(obj).siblings(".taskHiddenContent").slideDown();}else{$(obj).removeClass("activeState");$(obj).attr("aria-expanded","false");$(obj).find(".taskImageContainer").delay(delayIcon).show(0);$(obj).siblings(".taskHiddenContent").slideUp();}}$("div.taskSecondstate").on("focusin keypress",function(){if((!$(this).hasClass("activeState"))){if($("div.taskSecondstate").hasClass("activeState")){$(".activeState").attr("aria-expanded","false");$(".activeState").find(".taskImageContainer").delay(delayIcon).show(0);$(".activeState").siblings(".taskHiddenContent").slideUp();$(".activeState").removeClass("activeState");}}});$(".task:last-child input:submit").focusout(function(){$(".activeState").attr("aria-expanded","false");$(".activeState").find(".taskImageContainer").delay(delayIcon).show(0);$(".activeState").siblings(".taskHiddenContent").slideUp();$(".activeState").removeClass("activeState");});};WF.Component.BottomRegionImages={toggleBottomRegionImages:function(){$("#communityLinks li a").on("mouseover focus",function(e){var myindex=$(this).parent().index();var showindex=myindex+1;$(".box img").addClass("hide");var imageSrc=$(this).data("image");var imageNum=$(".box").find("img:eq("+showindex+")");var imagedataSrc=imageNum.attr("data-deferred-src");imageNum.attr("src",imagedataSrc);imageNum.removeClass("hide");
});$("#communityLinks li a").on("mouseout focusout",function(e){$(".box img").addClass("hide");$(".box").find("img:eq(0)").removeClass("hide");});}};WF.OnLoads.setupBottomRegion=function(root){WF.Component.BottomRegionImages.toggleBottomRegionImages();};function GSA_getSearchRootPathPrefix(){return"/search";}function GSA_getResourceRootPathPrefix(){return"";}function GSA_isEmbeddedMode(){return false;}var ss_form_element="frmSearch";var ss_popup_element="search_suggest";var ss_seq=["g"];var ss_g_one_name_to_display="Suggestion";var ss_g_more_names_to_display="";var ss_g_max_to_display=5;var ss_max_to_display=5;var ss_wait_millisec=300;var ss_delay_millisec=30;var ss_gsa_host=null;var SS_OUTPUT_FORMAT_LEGACY="legacy";var SS_OUTPUT_FORMAT_OPEN_SEARCH="os";var SS_OUTPUT_FORMAT_RICH="rich";var ss_protocol=SS_OUTPUT_FORMAT_RICH;var ss_allow_non_query=true;var ss_non_query_empty_title="No Title";var ss_allow_debug=false;var URI_RE_=new RegExp("^"+"(?:"+"([^:/?#]+)"+":)?"+"(?://"+"(?:([^/?#]*)@)?"+"([^/?#:@]*)"+"(?::([0-9]+))?"+")?"+"([^?#]+)?"+"(?:\\?([^#]*))?"+"(?:#(.*))?"+"$");var URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_=/[#\/\?@]/g;var URI_DISALLOWED_IN_PATH_=/[\#\?]/g;var ss_cached=[];var ss_qbackup=null;var ss_qshown=null;var ss_loc=-1;var ss_waiting=0;var ss_painting=false;var ss_key_handling_queue=null;var ss_painting_queue=null;var ss_dismissed=false;var ss_panic=false;var SS_ROW_CLASS="ss-gac-a";var SS_ROW_SELECTED_CLASS="ss-gac-b";if(!Array.prototype.indexOf){Array.prototype.indexOf=function(searchElement){if(this==null){throw new TypeError();}var t=Object(this);var len=t.length>>>0;if(len===0){return -1;}var n=0;if(arguments.length>0){n=Number(arguments[1]);if(n!=n){n=0;}else{if(n!=0&&n!=Infinity&&n!=-Infinity){n=(n>0||-1)*Math.floor(Math.abs(n));}}}if(n>=len){return -1;}var k=n>=0?n:Math.max(len-Math.abs(n),0);for(;k<len;k++){if(k in t&&t[k]===searchElement){return k;}}return -1;};}var XH_ieProgId_;var XML_READY_STATE_UNINITIALIZED=0;var XML_READY_STATE_LOADING=1;var XML_READY_STATE_LOADED=2;var XML_READY_STATE_INTERACTIVE=3;var XML_READY_STATE_COMPLETED=4;function XH_XmlHttpInit_(){var XH_ACTIVE_X_IDENTS=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];if(typeof XMLHttpRequest=="undefined"&&typeof ActiveXObject!="undefined"){for(var i=0;i<XH_ACTIVE_X_IDENTS.length;i++){var candidate=XH_ACTIVE_X_IDENTS[i];try{new ActiveXObject(candidate);XH_ieProgId_=candidate;break;}catch(e){}}if(!XH_ieProgId_){throw Error("Could not create ActiveXObject. ActiveX might be disabled,"+" or MSXML might not be installed.");}}}XH_XmlHttpInit_();function XH_XmlHttpCreate(){if(XH_ieProgId_){return new ActiveXObject(XH_ieProgId_);}else{return new XMLHttpRequest();}}function XH_XmlHttpGET(xmlHttp,url,handler){xmlHttp.open("GET",url,true);xmlHttp.onreadystatechange=handler;XH_XmlHttpSend(xmlHttp,null);}function XH_XmlHttpPOST(xmlHttp,url,data,handler){xmlHttp.open("POST",url,true);xmlHttp.onreadystatechange=handler;xmlHttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded");XH_XmlHttpSend(xmlHttp,data);}function XH_XmlHttpOpen(xmlHttp,verb,url,handler){xmlHttp.open(verb,url,true);xmlHttp.onreadystatechange=handler;}function XH_XmlHttpSetRequestHeader(xmlHttp,name,value){xmlHttp.setRequestHeader(name,value);}function XH_XmlHttpSend(xmlHttp,data){try{xmlHttp.send(data);}catch(e){log("XMLHttpSend failed "+e.toString()+"<br>"+e.stack);throw e;}}function XH_XmlHttpAbort(xmlHttp){SafeTimeout(window,function(){xmlHttp.onreadystatechange=function(){};},0);if(xmlHttp.readyState<XML_READY_STATE_COMPLETED){xmlHttp.abort();}}var ss_debug=new ss_Debugger();function ss_composeSuggestUri(qVal,suggestForm){if(!qVal){return null;}var accessVal=(suggestForm.access&&suggestForm.access.value)?suggestForm.access.value:"p";var uri="/search/as/suggest";if(SS_OUTPUT_FORMAT_LEGACY==ss_protocol){uri=uri+"?token="+encodeURIComponent(qVal)+"&max_matches="+ss_g_max_to_display;}else{uri=uri+"?q="+encodeURIComponent(qVal)+"&max="+ss_g_max_to_display;}uri=uri+"&access="+encodeURIComponent(accessVal)+"&format="+encodeURIComponent(ss_protocol);if(ss_isEmbeddedMode_()){uri=window["GSA_getResourceRootPathPrefix"]()+encodeURIComponent(uri);}return uri;}function ss_suggest(qVal){var startTimeMs=new Date().getTime();if(!ss_cached[qVal]){ss_cached[qVal]={};}var suggestForm=document.getElementById(ss_form_element);var uri=ss_composeSuggestUri(qVal,suggestForm);var url=uri;if(ss_panic){alert("ss_suggest() AJAX: "+url);}var xmlhttp=XH_XmlHttpCreate();var handler=function(){if(xmlhttp.readyState==XML_READY_STATE_COMPLETED){if(ss_panic){alert("ss_suggest() AJAX: "+xmlhttp.responseText);}var suggested;try{suggested=JSON.parse(xmlhttp.responseText);}catch(e){ss_cached[qVal].g=null;ss_show(qVal);return;}if(ss_use.g){try{switch(ss_protocol){case SS_OUTPUT_FORMAT_LEGACY:default:var suggestions=suggested;if(suggestions&&suggestions.length>0){var found=false;ss_cached[qVal].g=[];var max=(ss_g_max_to_display<=0)?suggestions.length:Math.min(ss_g_max_to_display,suggestions.length);for(var si=0;si<max;si++){ss_cached[qVal].g[si]={"q":suggestions[si]};found=true;}if(!found){ss_cached[qVal].g=null;}}else{ss_cached[qVal].g=null;}break;case SS_OUTPUT_FORMAT_OPEN_SEARCH:if(suggested.length>1){var suggestions=suggested[1];if(suggestions&&suggestions.length>0){var found=false;ss_cached[qVal].g=[];var max=(ss_g_max_to_display<=0)?suggestions.length:Math.min(ss_g_max_to_display,suggestions.length);for(var si=0;si<max;si++){if(suggestions[si]&&suggestions[si]!=suggested[0]){ss_cached[qVal].g[si]={"q":suggestions[si]};found=true;}else{if((suggested.length>3)&&ss_allow_non_query){var title=(suggested[2].length>si)?null:suggested[2][si];var url=(suggested[3].length>si)?null:suggested[3][si];if(url){title=!title?ss_non_query_empty_title:title;ss_cached[qVal].g[si]={"t":title,"u":url};found=true;}}}}if(!found){ss_cached[qVal].g=null;}}else{ss_cached[qVal].g=null;}}else{ss_cached[qVal].g=null;}break;case SS_OUTPUT_FORMAT_RICH:var suggestions=suggested.results;var relatedSuggestion=suggested.relatedSuggestion;if(suggestions&&suggestions.length>0){var found=false;ss_cached[qVal].g=[];var max=(ss_g_max_to_display<=0)?suggestions.length:Math.min(ss_g_max_to_display,suggestions.length);for(var si=0;si<max;si++){if(suggestions[si].name&&suggestions[si].name!=suggested.query){ss_cached[qVal].g[si]={"q":suggestions[si].name};found=true;}else{if(ss_allow_non_query){var title=suggestions[si].content;var url=suggestions[si].moreDetailsUrl;if(url){title=!title?ss_non_query_empty_title:title;ss_cached[qVal].g[si]={"t":title,"u":url};found=true;}}}}if(!found){ss_cached[qVal].g=null;}}else{ss_cached[qVal].g=null;}if(relatedSuggestion&&relatedSuggestion.length>0){var found=false;ss_cached[qVal].r=[];var max=(ss_r_max_to_display<=0)?relatedSuggestion.length:Math.min(ss_r_max_to_display,relatedSuggestion.length);for(var si=0;si<max;si++){if(relatedSuggestion[si].message&&relatedSuggestion[si].message!=suggested.query){ss_cached[qVal].r[si]={"q":relatedSuggestion[si].message,"u":relatedSuggestion[si].url};found=true;}else{if(ss_allow_non_query){var title=suggestions[si].content;var url=suggestions[si].moreDetailsUrl;if(url){title=!title?ss_non_query_empty_title:title;ss_cached[qVal].g[si]={"t":title,"u":url};found=true;}}}}if(!found){ss_cached[qVal].g=null;}}break;}}catch(e){ss_cached[qVal].g=null;}}if(ss_allow_debug&&ss_debug&&ss_debug.getDebugMode()){var stopTimeMs=new Date().getTime();ss_debug.addRequestDebugLine(qVal,"suggest",stopTimeMs-startTimeMs,ss_cached[qVal]);}ss_show(qVal);}};XH_XmlHttpPOST(xmlhttp,url,"",handler);}function ss_processed(qVal){if(!ss_cached[qVal]&&ss_use.g){return false;}return true;}function ss_handleAllKey(e){var kid=(window.event)?window.event.keyCode:e.keyCode;switch(kid){case 40:case 38:break;case 9:ss_qbackup=null;ss_dismissed=true;ss_clear(true);case 16:ss_qbackup=null;ss_dismissed=true;var qry=document.getElementById(ss_form_element).q.value;if(!ss_processed(qry)){if(ss_panic){alert("run ajax when key off");
}ss_suggest(qry);}break;case 113:if(!ss_allow_debug){break;}if(ss_debug&&ss_debug.getDebugMode()){ss_debug.deactivateConsole();}else{ss_debug.activateConsole();}break;default:break;}}function ss_handleKey(e,opt_inputEle){ss_initEmbedMode_(opt_inputEle);var kid=(window.event)?window.event.keyCode:e.keyCode;var fo=document.getElementById(ss_form_element);if(ss_isEmbeddedMode_()){document.getElementById(ss_form_element).q.value=opt_inputEle.value;}var qnow=(!ss_qbackup)?fo.q.value:ss_qbackup;var sum=0;var tbl=document.getElementById(ss_popup_element);switch(kid){case 40:ss_dismissed=false;if(ss_processed(qnow)){sum=ss_countSuggestions(qnow);if(sum>0){if(tbl.style.display=="none"){ss_show(qnow);break;}if(ss_qbackup){ss_loc++;}else{ss_qbackup=qnow;ss_loc=0;}while(ss_loc>=sum){ss_loc-=sum;}var rows=tbl.getElementsByTagName("tr");for(var ri=0;ri<rows.length-1;ri++){if(ri==ss_loc){rows[ri].className=SS_ROW_SELECTED_CLASS;}else{rows[ri].className=SS_ROW_CLASS;}}var suggestion=ss_locateSuggestion(qnow,ss_loc);if(suggestion.q){fo.q.value=suggestion.q;if(ss_isEmbeddedMode_()&&opt_inputEle){opt_inputEle.value=suggestion.q;}}else{fo.q.value=ss_qbackup;if(ss_isEmbeddedMode_()&&opt_inputEle){opt_inputEle.value=ss_qbackup;}}}}else{if(ss_panic){alert("run ajax when key down");}ss_suggest(qnow);}break;case 38:ss_dismissed=false;if(ss_processed(qnow)){sum=ss_countSuggestions(qnow);if(sum>0){if(tbl.style.display=="none"){ss_show(qnow);break;}if(ss_qbackup){ss_loc--;}else{ss_qbackup=qnow;ss_loc=-1;}while(ss_loc<0){ss_loc+=sum;}var rows=tbl.getElementsByTagName("tr");for(var ri=0;ri<rows.length-1;ri++){if(ri==ss_loc){rows[ri].className=SS_ROW_SELECTED_CLASS;}else{rows[ri].className=SS_ROW_CLASS;}}var suggestion=ss_locateSuggestion(qnow,ss_loc);if(suggestion.q){fo.q.value=suggestion.q;}else{fo.q.value=ss_qbackup;}}}else{if(ss_panic){alert("run ajax when key up");}ss_suggest(qnow);}break;case 13:case 9:if(ss_isEmbeddedMode_()){return;}var url=null;if(ss_processed(qnow)&&ss_qbackup&&ss_loc>-1){var suggestion=ss_locateSuggestion(ss_qbackup,ss_loc);if(suggestion.u){url=suggestion.u;}}ss_qbackup=null;ss_dismissed=true;ss_clear();if(url){window.location.href=url;}break;case 27:if(ss_qbackup){fo.q.value=ss_qbackup;ss_qbackup=null;}ss_dismissed=true;ss_clear();break;case 37:case 39:case 16:break;default:ss_dismissed=false;if(fo.q.value==ss_qshown){}else{if(ss_key_handling_queue){clearTimeout(ss_key_handling_queue);}ss_qbackup=null;ss_loc=-1;ss_waiting++;if(ss_allow_debug&&ss_debug&&ss_debug.getDebugMode()){ss_debug.addWaitDebugLine(fo.q.value,"queue",ss_wait_millisec);}ss_key_handling_queue=setTimeout(function(){ss_handleQuery(ss_escape(fo.q.value),ss_waiting);},ss_wait_millisec);}break;}}function ss_isEmbeddedMode_(){return window["GSA_isEmbeddedMode"]&&window.GSA_isEmbeddedMode();}function ss_handleQuery(query,waiting1){if(waiting1!=ss_waiting){return;}ss_waiting=0;if(query==""){ss_clear();}else{if(!ss_processed(query)){if(ss_panic){alert("run ajax when key change");}ss_suggest(query);}else{ss_show(query);}}}function ss_removeNode_(node){return node&&node.parentNode?node.parentNode.removeChild(node):null;}function ss_replaceNode_(newNode,oldNode){var parentNode=oldNode.parentNode;if(parentNode){parentNode.replaceChild(newNode,oldNode);}}function ss_initEmbedMode_(inputEle){var suggestFormEle=document.getElementById(ss_form_element);if(!suggestFormEle&&ss_isEmbeddedMode_()){var embedModeFormEle=document.createElement("form");embedModeFormEle.id="suggestform"+new Date().getTime();var formParamsEle=document.getElementById("gsaembedmodeformparams");var inputEles=formParamsEle.getElementsByTagName("INPUT");for(var i=0;i<inputEles.length;i++){embedModeFormEle.appendChild(inputEles[i].cloneNode(true));}ss_replaceNode_(embedModeFormEle,formParamsEle);var bodyEle=document.getElementsByTagName("BODY")[0];bodyEle.appendChild(embedModeFormEle);ss_form_element=embedModeFormEle.id;var suggestPopupTableEle=document.createElement("table");suggestPopupTableEle.border="0";suggestPopupTableEle.cellPadding="0";suggestPopupTableEle.cellSpacing="0";suggestPopupTableEle.className="ss-gac-m ss-embed-mode";suggestPopupTableEle.id="sspop"+new Date().getTime();suggestPopupTableEle.style.display="none";ss_popup_element=suggestPopupTableEle.id;inputEle.parentNode.insertBefore(suggestPopupTableEle,inputEle);}}function ss_sf(){if(!ss_isEmbeddedMode_()){document.getElementById(ss_form_element).q.focus();}ss_dismissed=false;}function ss_clear(nofocus){ss_qshown=null;var fo=document.getElementById(ss_form_element);var qnow=(!ss_qbackup)?fo.q.value:ss_qbackup;ss_hide(qnow);if(!nofocus){ss_sf();}}function ss_hide(qry){var tbl=document.getElementById(ss_popup_element);if(tbl.style.display=="block"){if(ss_panic){alert("close suggestion box");}if(ss_allow_debug&&ss_debug&&ss_debug.getDebugMode()){ss_debug.addHideDebugLine(qry,"hide");}tbl.style.display="none";tbl.setAttribute("aria-hidden","true");}var inpcombo=document.getElementById("inputTopSearchField");inpcombo.setAttribute("aria-expanded","false");if($("#frmSearch").find("div[aria-live='polite']")){var zeroResults=WF.Strings.Shared.searchSuggest[WF.Page.lang].replace("Xn","0");$("#frmSearch div[aria-live='polite']").text(zeroResults);}}function ss_show(qry){var currentQry=document.getElementById(ss_form_element).q.value;if(currentQry!=qry){if(ss_allow_debug&&ss_debug&&ss_debug.getDebugMode()){ss_debug.addHideDebugLine(qry,"skip");}return;}var startTimeMs=new Date().getTime();if(ss_dismissed){ss_qshown=null;ss_hide(qry);return;}if(!ss_processed(qry)){return;}if(qry==""){ss_hide(qry);return;}var g=ss_cached[qry]?ss_cached[qry].g:null;var r=ss_cached[qry]?ss_cached[qry].r:null;var disp=false;if(ss_use.g&&g){disp=true;}if(!disp){ss_qshown=null;}if(ss_painting){if(ss_painting_queue){clearTimeout(ss_painting_queue);}if(ss_allow_debug&&ss_debug&&ss_debug.getDebugMode()){ss_debug.addWaitDebugLine(qry,"delay",ss_delay_millisec);}ss_painting_queue=setTimeout(function(){ss_show(ss_escape(qry));},ss_delay_millisec);return;}else{ss_painting=true;}var tbl=document.getElementById(ss_popup_element);for(var ri=tbl.rows.length-1;ri>-1;ri--){tbl.deleteRow(ri);}var cnt=0;var rCount=0;for(var z=0;z<ss_seq.length;z++){switch(ss_seq[z]){case"g":cnt+=ss_showSuggestion(g,cnt,tbl,qry);rCount+=ss_showRelatedSuggestion(r,rCount,tbl,qry);break;}if(ss_max_to_display>0&&cnt>=ss_max_to_display){break;}}if(cnt>0){var row=tbl.insertRow(-1);row.className="ss-gac-e";var cls=document.createElement("td");cls.colSpan=2;var clsTxt=document.createElement("span");clsTxt.onclick=function(){ss_qbackup=null;ss_clear();var query=document.getElementById(ss_form_element).q.value;if(!ss_processed(query)){ss_dismissed=true;if(ss_panic){alert("run ajax when mouse close");}ss_suggest(query);}};cls.appendChild(clsTxt);row.appendChild(cls);tbl.style.display="block";tbl.setAttribute("aria-hidden","false");tbl.setAttribute("role","listbox");var inpcombo=document.getElementById("inputTopSearchField");inpcombo.setAttribute("aria-expanded","true");ss_qshown=qry;if(ss_panic){alert("open suggestion box for "+qry);}if(ss_allow_debug&&ss_debug&&ss_debug.getDebugMode()){var stopTimeMs=new Date().getTime();ss_debug.addShowDebugLine(qry,stopTimeMs-startTimeMs,ss_cached[qry],cnt);}}else{ss_hide(qry);}ss_painting=false;}function ss_showSuggestion(g,cnt,tbl,qry){if(ss_max_to_display>0&&cnt>=ss_max_to_display){return 0;}var searchDiv=$("#frmSearch").find("div[aria-live='polite']");var numberResultsText;if(g){numberResultsText=WF.Strings.Shared.searchSuggest[WF.Page.lang].replace("Xn",g.length);}else{numberResultsText=WF.Strings.Shared.searchSuggest[WF.Page.lang].replace("Xn","0");}if(searchDiv.length>0){$(searchDiv).text(numberResultsText);}else{var srchDivCreate=document.createElement("div");$("#search_suggest").before(srchDivCreate);$(srchDivCreate).text(numberResultsText);$(srchDivCreate).attr("role","status");$(srchDivCreate).attr("aria-live","polite");$(srchDivCreate).attr("class","hidden");}if(g&&g.length>0){lqry=qry.toLowerCase().replace(/\"/g,"");
for(var i=0;i<g.length;i++){var row=tbl.insertRow(-1);row.onclick=ss_handleMouseC;row.onmousemove=ss_handleMouseM;row.className=SS_ROW_CLASS;row.setAttribute("role","option");var alt=document.createElement("td");if(g[i].q){var txtNode="<b>"+g[i].q.substr(0,lqry.length)+"</b>";if(g[i].q.length>lqry.length){txtNode+=g[i].q.substring(lqry.length);}alt.innerHTML=txtNode;}else{alt.innerHTML="<i>"+g[i].t+"</i>";}alt.className="ss-gac-c";row.appendChild(alt);var clue="";if(i==0&&g.length==1){clue=ss_g_one_name_to_display;}else{if(i==0){clue=ss_g_more_names_to_display;}}if(ss_max_to_display>0&&cnt+i+1>=ss_max_to_display){return i+1;}}return g.length;}return 0;}function ss_showRelatedSuggestion(g,cnt,tbl,qry){if(ss_max_to_display>0&&cnt>=ss_max_to_display){return 0;}if(g&&g.length>0){var headRow=tbl.insertRow(-1);headRow.onclick=ss_handleMouseC;headRow.onmousemove=ss_handleMouseM;headRow.className=SS_ROW_CLASS;var headAlt=document.createElement("td");headAlt.innerHTML='<div id="ss-gac-line"></div><div id="ss-gac-related">Related Suggestions</div>';headRow.appendChild(headAlt);lqry=qry.toLowerCase().replace(/\"/g,"");for(var i=0;i<g.length;i++){var row=tbl.insertRow(-1);row.onclick=ss_handleMouseC;row.onmousemove=ss_handleMouseM;row.className=SS_ROW_CLASS;var alt=document.createElement("td");if(g[i].q){var txtNode="<a href="+g[i].u+">"+g[i].q+"</a>";alt.innerHTML=txtNode;}else{alt.innerHTML="<i>"+g[i].t+"</i>";}alt.className="ss-gac-c";row.appendChild(alt);var clue="";if(i==0&&g.length==1){clue=ss_g_one_name_to_display;}else{if(i==0){clue=ss_g_more_names_to_display;}}if(ss_max_to_display>0&&cnt+i+1>=ss_max_to_display){return i+1;}}return g.length;}return 0;}function ss_handleMouseM(){var fo=document.getElementById(ss_form_element);var tbl=document.getElementById(ss_popup_element);var rows=tbl.getElementsByTagName("tr");for(var ri=0;ri<rows.length-1;ri++){if(rows[ri]==this&&rows[ri].className!=SS_ROW_SELECTED_CLASS){rows[ri].className=SS_ROW_SELECTED_CLASS;if(!ss_qbackup){ss_qbackup=fo.q.value;}ss_loc=ri;var suggestion=ss_locateSuggestion(ss_qbackup,ss_loc);if(suggestion.q){fo.q.value=suggestion.q;}else{fo.q.value=ss_qbackup;}}else{if(rows[ri]!=this){rows[ri].className=SS_ROW_CLASS;}}}ss_sf();return true;}function ss_handleMouseC(){var fo=document.getElementById(ss_form_element);var tbl=document.getElementById(ss_popup_element);var rows=tbl.getElementsByTagName("tr");for(var ri=0;ri<rows.length-1;ri++){if(rows[ri]==this){if(!ss_qbackup){ss_qbackup=fo.q.value;}ss_loc=ri;var suggestion=ss_locateSuggestion(ss_qbackup,ss_loc);if(suggestion.q){fo.q.value=suggestion.q;fo.submit();}else{fo.q.value=ss_qbackup;if(suggestion.u){window.location.href=suggestion.u;}}break;}}}function ss_countSuggestions(query){var cnt=0;for(var i=0;i<ss_seq.length;i++){switch(ss_seq[i]){case"g":cnt+=ss_cached[query].g?ss_cached[query].g.length:0;break;}if(ss_max_to_display>0&&cnt>=ss_max_to_display){return ss_max_to_display;}}return cnt;}function ss_locateSuggestion(query,loc){var cnt1=0;var cnt2=0;var type=null;for(var z=0;z<ss_seq.length;z++){switch(ss_seq[z]){case"g":cnt2+=ss_cached[query].g?ss_cached[query].g.length:0;break;}if(loc>=cnt1&&loc<cnt2){switch(ss_seq[z]){case"g":var qV=ss_cached[query].g[loc-cnt1].q;if(qV){return{"q":qV};}else{return{"u":ss_cached[query].g[loc-cnt1].u};}}break;}cnt1=cnt2;}return null;}function ss_escape(query){return query.replace(/\\/g,"\\\\").replace(/\"/g,'\\"');}function ss_escapeDbg(query){var escapedQuery="";var ch=query.split("");for(var i=0;i<ch.length;i++){switch(ch[i]){case"&":escapedQuery+="&amp;";break;case"<":escapedQuery+="&lt;";break;case">":escapedQuery+="&gt;";break;default:escapedQuery+=ch[i];break;}}return escapedQuery;}function ss_Debugger(){this.debugMode=false;}ss_Debugger.DEBUG_CONSOLE_ID="ss_debug_console";ss_Debugger.DEBUG_CONTENT_ID="ss_debug_content";ss_Debugger.DEBUG_TOGGLE_ID="ss_debug_toggle";ss_Debugger.prototype.getDebugMode=function(){return this.debugMode;};ss_Debugger.prototype.activateConsole=function(){var console=document.getElementById(ss_Debugger.DEBUG_CONSOLE_ID);if(console){console.style.display="block";}else{var dc=document.createElement("div");dc.id=ss_Debugger.DEBUG_CONSOLE_ID;dc.zIndex=100;dc.className="expanded";var title=document.createElement("h1");title.appendChild(document.createTextNode("GSA Suggest Debug Console"));title.style.display="inline";dc.appendChild(title);var actn=document.createElement("div");actn.style.styleFloat="right";actn.style.cssFloat="right";var btn=document.createElement("button");btn.onclick=function(event){var debugContent=document.getElementById(ss_Debugger.DEBUG_CONTENT_ID);if(debugContent){for(var ri=debugContent.rows.length-1;ri>0;ri--){debugContent.deleteRow(ri);}}};btn.appendChild(document.createTextNode("Clear console"));actn.appendChild(btn);btn=document.createElement("button");btn.onclick=function(event){ss_cached=[];};btn.appendChild(document.createTextNode("Clear cache"));actn.appendChild(btn);btn=document.createElement("button");btn.id=ss_Debugger.DEBUG_TOGGLE_ID;btn.onclick=function(event){var debugConsole=document.getElementById(ss_Debugger.DEBUG_CONSOLE_ID);if(debugConsole){var b=document.getElementById(ss_Debugger.DEBUG_TOGGLE_ID);if(debugConsole.className.indexOf("expanded")!=-1){debugConsole.className=debugConsole.className.replace(/expanded/,"contracted");b.innerHTML="Maximize";}else{debugConsole.className=debugConsole.className.replace(/contracted/,"expanded");b.innerHTML="Minimize";}}};btn.appendChild(document.createTextNode("Minimize"));actn.appendChild(btn);actn.style.display="inline";dc.appendChild(actn);dc.appendChild(document.createElement("br"));var pane=document.createElement("table");pane.id=ss_Debugger.DEBUG_CONTENT_ID;var dhr=pane.insertRow(-1);var dhc=document.createElement("th");dhc.innerHTML="Query";dhr.appendChild(dhc);dhc=document.createElement("th");dhc.innerHTML="Type";dhr.appendChild(dhc);dhc=document.createElement("th");dhc.innerHTML="Time";dhr.appendChild(dhc);dhc=document.createElement("th");dhc.innerHTML="g";dhr.appendChild(dhc);dhc=document.createElement("th");dhc.innerHTML="Total";dhr.appendChild(dhc);dc.appendChild(pane);document.body.appendChild(dc);}this.debugMode=true;};ss_Debugger.prototype.deactivateConsole=function(){var console=document.getElementById(ss_Debugger.DEBUG_CONSOLE_ID);if(console){console.style.display="none";}this.debugMode=false;};ss_Debugger.prototype.addRequestDebugLine=function(query,type,time,obj){var debugContent=document.getElementById(ss_Debugger.DEBUG_CONTENT_ID);if(debugContent){var currentRow=debugContent.insertRow(1);var currentCell=document.createElement("td");currentCell.innerHTML="&lt;"+ss_escapeDbg(query)+"&gt;";currentRow.appendChild(currentCell);currentCell=document.createElement("td");currentCell.innerHTML=type;currentRow.appendChild(currentCell);currentCell=document.createElement("td");currentCell.className="no";currentCell.innerHTML=time+" ms";currentRow.appendChild(currentCell);switch(type){case"suggest":currentCell=document.createElement("td");currentCell.className="no";currentCell.innerHTML=(obj.g?obj.g.length:0);currentRow.appendChild(currentCell);currentCell=document.createElement("td");currentRow.appendChild(currentCell);break;default:currentCell=document.createElement("td");currentRow.appendChild(currentCell);currentCell=document.createElement("td");currentRow.appendChild(currentCell);break;}}};ss_Debugger.prototype.addShowDebugLine=function(query,time,o,total){var debugContent=document.getElementById(ss_Debugger.DEBUG_CONTENT_ID);if(debugContent){var currentRow=debugContent.insertRow(1);var currentCell=document.createElement("td");currentCell.innerHTML="&lt;"+ss_escapeDbg(query)+"&gt;";currentRow.appendChild(currentCell);currentCell=document.createElement("td");currentCell.innerHTML="<i>show</i>";currentRow.appendChild(currentCell);currentCell=document.createElement("td");currentCell.className="no";currentCell.innerHTML=time+" ms";currentRow.appendChild(currentCell);currentCell=document.createElement("td");
currentCell.className="no";currentCell.innerHTML=(o?(o.g?o.g.length:0):0);currentRow.appendChild(currentCell);currentCell=document.createElement("td");currentCell.className="no";currentCell.innerHTML=total;currentRow.appendChild(currentCell);}};ss_Debugger.prototype.addHideDebugLine=function(query,type){var debugContent=document.getElementById(ss_Debugger.DEBUG_CONTENT_ID);if(debugContent){var currentRow=debugContent.insertRow(1);var currentCell=document.createElement("td");currentCell.innerHTML="&lt;"+ss_escapeDbg(query)+"&gt;";currentRow.appendChild(currentCell);currentCell=document.createElement("td");currentCell.innerHTML="<i>"+type+"</i>";currentRow.appendChild(currentCell);currentCell=document.createElement("td");currentCell.className="no";currentCell.innerHTML="0 ms";currentRow.appendChild(currentCell);currentCell=document.createElement("td");currentRow.appendChild(currentCell);currentCell=document.createElement("td");currentRow.appendChild(currentCell);}};ss_Debugger.prototype.addWaitDebugLine=function(query,type,time){var debugContent=document.getElementById(ss_Debugger.DEBUG_CONTENT_ID);if(debugContent){var currentRow=debugContent.insertRow(1);var currentCell=document.createElement("td");currentCell.innerHTML="&lt;"+ss_escapeDbg(query)+"&gt;";currentRow.appendChild(currentCell);currentCell=document.createElement("td");currentCell.innerHTML="<i>"+type+"</i>";currentRow.appendChild(currentCell);currentCell=document.createElement("td");currentCell.className="no";currentCell.innerHTML=time+" ms";currentRow.appendChild(currentCell);currentCell=document.createElement("td");currentRow.appendChild(currentCell);currentCell=document.createElement("td");currentRow.appendChild(currentCell);}};var ss_use={};ss_use.g=ss_seq.indexOf("g")>=0?true:false;$(document).ready(function(){var $inputField=$("#inputTopSearchField"),$searchButton=$(".register");$searchButton.attr("disabled",true);$inputField.keyup(function(){var trigger=false;$inputField.each(function(){if(!$(this).val()){trigger=true;}});trigger?$searchButton.attr("disabled",true):$searchButton.removeAttr("disabled");});});(function(){if(self!=top){if(document.images){top.location.replace(window.location.href);}else{top.location.href=window.location.href;}}if(typeof loadUserPrefs=="object"){loadUserPrefs();}if(window.jsData&&jsData.fortyoneSwitch&&jsData.fortyoneSwitch=="on"){$("#frmSignon").submit(function(){submitUserPrefs();});}})();